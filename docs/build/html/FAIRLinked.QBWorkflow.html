

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FAIRLinked.QBWorkflow package &mdash; FAIRLinked 0.3.0.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=d1e448af"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="FAIRLinked.RDFTableConversion package" href="FAIRLinked.RDFTableConversion.html" />
    <link rel="prev" title="FAIRLinked.InterfaceMDS package" href="FAIRLinked.InterfaceMDS.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            FAIRLinked
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="FAIRLinked.html">FAIRLinked package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="FAIRLinked.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="FAIRLinked.InterfaceMDS.html">FAIRLinked.InterfaceMDS package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">FAIRLinked.QBWorkflow package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-FAIRLinked.QBWorkflow.data_parser">FAIRLinked.QBWorkflow.data_parser module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-FAIRLinked.QBWorkflow.data_template_generator">FAIRLinked.QBWorkflow.data_template_generator module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-FAIRLinked.QBWorkflow.input_handler">FAIRLinked.QBWorkflow.input_handler module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-FAIRLinked.QBWorkflow.mds_ontology_analyzer">FAIRLinked.QBWorkflow.mds_ontology_analyzer module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-FAIRLinked.QBWorkflow.namespace_parser">FAIRLinked.QBWorkflow.namespace_parser module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-FAIRLinked.QBWorkflow.namespace_template_generator">FAIRLinked.QBWorkflow.namespace_template_generator module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-FAIRLinked.QBWorkflow.rdf_data_cube_workflow">FAIRLinked.QBWorkflow.rdf_data_cube_workflow module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-FAIRLinked.QBWorkflow.rdf_to_df">FAIRLinked.QBWorkflow.rdf_to_df module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-FAIRLinked.QBWorkflow.rdf_transformer">FAIRLinked.QBWorkflow.rdf_transformer module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-FAIRLinked.QBWorkflow.utility">FAIRLinked.QBWorkflow.utility module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-FAIRLinked.QBWorkflow">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="FAIRLinked.RDFTableConversion.html">FAIRLinked.RDFTableConversion package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="FAIRLinked.html#module-FAIRLinked">Module contents</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">FAIRLinked</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="FAIRLinked.html">FAIRLinked package</a></li>
      <li class="breadcrumb-item active">FAIRLinked.QBWorkflow package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/FAIRLinked.QBWorkflow.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="fairlinked-qbworkflow-package">
<h1>FAIRLinked.QBWorkflow package<a class="headerlink" href="#fairlinked-qbworkflow-package" title="Link to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-FAIRLinked.QBWorkflow.data_parser">
<span id="fairlinked-qbworkflow-data-parser-module"></span><h2>FAIRLinked.QBWorkflow.data_parser module<a class="headerlink" href="#module-FAIRLinked.QBWorkflow.data_parser" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.data_parser.read_excel_template">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.data_parser.</span></span><span class="sig-name descname"><span class="pre">read_excel_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/data_parser.html#read_excel_template"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.data_parser.read_excel_template" title="Link to this definition"></a></dt>
<dd><p>Reads the Excel data file generated by generate_data_xlsx_template and returns:
- A flat dictionary containing metadata for each variable, including the category.
- A DataFrame containing the experimental data with variable names (without category prefixes).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file_path</strong> (<em>str</em>) – The path to the Excel file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>A tuple containing:</dt><dd><ul class="simple">
<li><p>variable_metadata (dict): Flat dictionary with variable names as keys, and values being metadata dictionaries including ‘Category’.</p></li>
<li><p>df (DataFrame): Experimental data with variable names as columns (without category prefixes).</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-FAIRLinked.QBWorkflow.data_template_generator">
<span id="fairlinked-qbworkflow-data-template-generator-module"></span><h2>FAIRLinked.QBWorkflow.data_template_generator module<a class="headerlink" href="#module-FAIRLinked.QBWorkflow.data_template_generator" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.data_template_generator.generate_data_xlsx_template">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.data_template_generator.</span></span><span class="sig-name descname"><span class="pre">generate_data_xlsx_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">children_terms</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_xlsx_file_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/data_template_generator.html#generate_data_xlsx_template"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.data_template_generator.generate_data_xlsx_template" title="Link to this definition"></a></dt>
<dd><p>Generates an Excel template for data collection with various features such as merged cells, category headers,
colors, formatting, and borders. If no categories are provided, a ‘Miscellaneous’ category is generated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>children_terms</strong> (<em>dict</em>) – A dictionary where keys represent ontology categories (e.g., ‘mds:tool’) and values
are lists of terms (e.g., [‘InstrumentId’, ‘InstrumentName’]). If categories are empty,
a default ‘Miscellaneous’ category is created.</p></li>
<li><p><strong>output_xlsx_file_path</strong> (<em>str</em>) – The path where the generated Excel file should be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The function creates and saves an Excel file with the specified formatting at the provided path.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-FAIRLinked.QBWorkflow.input_handler">
<span id="fairlinked-qbworkflow-input-handler-module"></span><h2>FAIRLinked.QBWorkflow.input_handler module<a class="headerlink" href="#module-FAIRLinked.QBWorkflow.input_handler" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.check_if_running_experiment">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">check_if_running_experiment</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#check_if_running_experiment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.check_if_running_experiment" title="Link to this definition"></a></dt>
<dd><p>Prompts the user to answer whether they are currently running an experiment, accepting only ‘yes’ or ‘no’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>None</strong></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns <cite>True</cite> if the user enters ‘yes’, otherwise <cite>False</cite>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the input is not ‘yes’ or ‘no’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.check_ingestion">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">check_ingestion</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#check_ingestion"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.check_ingestion" title="Link to this definition"></a></dt>
<dd><p>Prompts the user whether data is for ingesting into CRADLE.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if data is for ingesting into CRADLE, False otherwise</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.check_valid_id">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">check_valid_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_input</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#check_valid_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.check_valid_id" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.choose_conversion_mode">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">choose_conversion_mode</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#choose_conversion_mode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.choose_conversion_mode" title="Link to this definition"></a></dt>
<dd><p>Prompts the user to decide whether to convert the entire DataFrame as one dataset
or each row as an individual dataset for RDF conversion.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>‘entire’ or ‘row-by-row’</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.get_approved_id_columns">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">get_approved_id_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">candidate_id_columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#get_approved_id_columns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.get_approved_id_columns" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Description:</dt><dd><p>Given a list of candidate ID columns (those that contain ‘id’ in their name),
prompts the user for each column whether they want it included in the dataset
naming. The prompt text changes depending on whether we are in ‘row-by-row’
mode or ‘entire’ mode.</p>
</dd>
<dt>Algorithm:</dt><dd><ol class="arabic simple">
<li><p>If there are no candidate_id_columns, print a message and return empty list.</p></li>
<li><p>Print each candidate column to the user,
asking if it should be included in naming.
- If mode == ‘row-by-row’, mention “row-based dataset naming.”
- If mode == ‘entire’, mention “slice naming for entire dataset.”</p></li>
<li><p>Collect approved columns in a list.</p></li>
<li><p>Return that list.</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>candidate_id_columns</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – Columns that appear to be ID-like (contain “id” or “ID”).</p></li>
<li><p><strong>mode</strong> (<em>str</em>) – ‘row-by-row’ or ‘entire’—used to tailor the prompt text.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Subset of candidate_id_columns that the user approves for naming.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.get_dataset_name">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">get_dataset_name</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#get_dataset_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.get_dataset_name" title="Link to this definition"></a></dt>
<dd><p>Prompts the user to enter a name for their dataset. Only allows letters and underscores.
Offers ‘SampleDataset’ as a fallback option if invalid input is provided.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A valid dataset name containing only letters, numbers, and underscores.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.get_domain">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">get_domain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">domains_hashset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#get_domain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.get_domain" title="Link to this definition"></a></dt>
<dd><p>Prompts the user to select a domain from the available options (present in a hashset), ensuring proper handling of spaces and case.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>domains_hashset</strong> (<em>set</em>) – A set of available domain names.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The selected domain name in lowercase.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the input is not a valid number corresponding to a domain in the list.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.get_identifiers">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">get_identifiers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">approved_id_cols</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#get_identifiers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.get_identifiers" title="Link to this definition"></a></dt>
<dd><p>Prompt the user to enter identifiers</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.get_input_data_excel">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">get_input_data_excel</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#get_input_data_excel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.get_input_data_excel" title="Link to this definition"></a></dt>
<dd><p>Prompts the user to enter the file path for a data Excel file and validates whether the file exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The valid file path of the Excel file.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>FileNotFoundError</strong> – If the file path provided by the user does not exist.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.get_input_namespace_excel">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">get_input_namespace_excel</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#get_input_namespace_excel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.get_input_namespace_excel" title="Link to this definition"></a></dt>
<dd><p>Prompts the user to enter the file path for a namespace Excel file and validates whether the file exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The valid file path of the Excel file.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>FileNotFoundError</strong> – If the file path provided by the user does not exist.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.get_namespace_for_dataset">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">get_namespace_for_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">namespace_map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#get_namespace_for_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.get_namespace_for_dataset" title="Link to this definition"></a></dt>
<dd><p>Prompts the user to select a namespace for their dataset, excluding predefined standard vocabulary namespaces.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>namespace_map</strong> (<em>dict</em>) – A dictionary where the keys are namespace prefixes and the values are corresponding base URIs.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The selected namespace prefix.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the user selects a number outside the valid range.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.get_ontology_file">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">get_ontology_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt_message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#get_ontology_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.get_ontology_file" title="Link to this definition"></a></dt>
<dd><p>Prompts the user to enter the file path for an ontology file and validates whether it exists
and has the correct extension (.ttl).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prompt_message</strong> (<em>str</em>) – Custom prompt message to specify which ontology file is being requested.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The valid file path of the ontology file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>FileNotFoundError</strong> – If the file path provided does not exist.</p></li>
<li><p><strong>ValueError</strong> – If the file does not have a .ttl extension.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.get_orcid">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">get_orcid</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#get_orcid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.get_orcid" title="Link to this definition"></a></dt>
<dd><p>Prompts the user to input an ORC_ID, ensuring that it conforms to the proper format by using a validation function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>None</strong></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A valid ORC_ID string.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the ORC_ID is empty or invalid.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.get_output_folder_path">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">get_output_folder_path</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#get_output_folder_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.get_output_folder_path" title="Link to this definition"></a></dt>
<dd><p>Prompts the user to provide an output folder path, and creates the folder if it does not exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>None</strong></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The valid path to the output folder.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>NotADirectoryError</strong> – If the path provided is not a valid directory.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.get_row_identifier_columns">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">get_row_identifier_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#get_row_identifier_columns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.get_row_identifier_columns" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.has_all_ontology_files">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">has_all_ontology_files</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#has_all_ontology_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.has_all_ontology_files" title="Link to this definition"></a></dt>
<dd><p>Prompts the user to confirm availability of all required ontology files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>None</strong></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>True if the user indicates they have both required ontology files</dt><dd><p>(lowest-level, combined), False otherwise.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the user provides an answer other than ‘yes’ or ‘no’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.has_existing_datacube_file">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">has_existing_datacube_file</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#has_existing_datacube_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.has_existing_datacube_file" title="Link to this definition"></a></dt>
<dd><p>Prompts the user to specify if they have an existing RDF data cube dataset,
which may be either:</p>
<blockquote>
<div><ul class="simple">
<li><p>A single file (.ttl, .jsonld)</p></li>
<li><p>A directory that contains .ttl/.jsonld files</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>(False, “”) if user says ‘no’,
(True, path) if user says ‘yes’ and provides a valid path that exists
(whether it’s a file or directory).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.input_handler.should_save_csv">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.input_handler.</span></span><span class="sig-name descname"><span class="pre">should_save_csv</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/input_handler.html#should_save_csv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.input_handler.should_save_csv" title="Link to this definition"></a></dt>
<dd><p>Prompts the user whether they want to save the DataFrame as CSV.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if user wants to save CSV, False otherwise</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-FAIRLinked.QBWorkflow.mds_ontology_analyzer">
<span id="fairlinked-qbworkflow-mds-ontology-analyzer-module"></span><h2>FAIRLinked.QBWorkflow.mds_ontology_analyzer module<a class="headerlink" href="#module-FAIRLinked.QBWorkflow.mds_ontology_analyzer" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.mds_ontology_analyzer.classify_leaf_nodes">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.mds_ontology_analyzer.</span></span><span class="sig-name descname"><span class="pre">classify_leaf_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">combined_ontology_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leaf_nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">URIRef</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_level_terms</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/mds_ontology_analyzer.html#classify_leaf_nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.mds_ontology_analyzer.classify_leaf_nodes" title="Link to this definition"></a></dt>
<dd><p>Classifies each leaf node into a top-level category by traversing upward along <cite>rdfs:subClassOf</cite> and
<cite>skos:broader</cite> relationships until a known top-level category is found.</p>
<p>Algorithm:
1. Parse the combined ontology into a graph.
2. For each leaf node, recursively follow <cite>rdfs:subClassOf</cite> and <cite>skos:broader</cite> upwards.
3. If a top-level category is reached, classify the leaf under that category.
4. If no top-level category is found, mark the leaf as missing.</p>
<p>This uses memoization to avoid repeated traversals of the same class.</p>
<p>Time Complexity:
O(N + E) with memoization, where N is number of nodes and E is number of edges.</p>
<p>Space Complexity:
O(N) for memoization and classification structures.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>combined_ontology_path</strong> (<em>str</em>) – Path to the combined ontology (.ttl file).</p></li>
<li><p><strong>leaf_nodes</strong> (<em>Set</em><em>[</em><em>URIRef</em><em>]</em>) – Set of leaf node URIs identified from the low-level ontology.</p></li>
<li><p><strong>top_level_terms</strong> (<em>Set</em><em>[</em><em>str</em><em>]</em>) – Set of URIs representing top-level categories.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Dictionary mapping top-level category URIs to a list of leaf node URIs.</p></li>
<li><p>List of URIs for leaf nodes that couldn’t be mapped.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[Dict[str, List[str]], List[str]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.mds_ontology_analyzer.find_leaf_nodes">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.mds_ontology_analyzer.</span></span><span class="sig-name descname"><span class="pre">find_leaf_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lowest_level_ontology_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">URIRef</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/mds_ontology_analyzer.html#find_leaf_nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.mds_ontology_analyzer.find_leaf_nodes" title="Link to this definition"></a></dt>
<dd><p>Identifies leaf nodes in the lowest-level ontology. Leaf nodes are classes that do not serve
as a superclass of any other class within the MDS namespace.</p>
<p>Algorithm:
1. Parse the lowest-level ontology and build an RDF graph.
2. Gather all classes (subjects of RDFS.subClassOf) and their superclasses.
3. Classes that never appear as an RDFS.subClassOf object are considered leaf nodes.</p>
<p>Time Complexity:
O(N + E) where N is the number of classes and E the number of subclass relations.</p>
<p>Space Complexity:
O(N) for storing classes and relationships.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>lowest_level_ontology_path</strong> (<em>str</em>) – Path to the low-level ontology (.ttl file).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A set of URIs representing leaf classes.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Set[URIRef]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.mds_ontology_analyzer.get_classification">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.mds_ontology_analyzer.</span></span><span class="sig-name descname"><span class="pre">get_classification</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lowest_level_ontology_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">combined_ontology_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/mds_ontology_analyzer.html#get_classification"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.mds_ontology_analyzer.get_classification" title="Link to this definition"></a></dt>
<dd><p>High-level function that coordinates:
1. Finding leaf nodes from the low-level ontology.
2. Identifying top-level categories directly from the combined ontology.
3. Classifying leaf nodes under these top-level categories.
4. Updating category colors and converting URIs to prefixed forms.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lowest_level_ontology_path</strong> (<em>str</em>) – Path to the lowest-level MDS ontology (.ttl file).</p></li>
<li><p><strong>combined_ontology_path</strong> (<em>str</em>) – Path to the combined MDS ontology (.ttl file).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>classification_prefixed: A dictionary with prefixed category URIs as keys and lists of prefixed leaf nodes as values.</p></li>
<li><p>missing_top_terms_prefixed: A list of prefixed URIs for terms that couldn’t be mapped.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[Dict[str, List[str]], List[str]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.mds_ontology_analyzer.get_prefixed_name">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.mds_ontology_analyzer.</span></span><span class="sig-name descname"><span class="pre">get_prefixed_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">URIRef</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/mds_ontology_analyzer.html#get_prefixed_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.mds_ontology_analyzer.get_prefixed_name" title="Link to this definition"></a></dt>
<dd><p>Converts a full URI to its corresponding prefixed form using the global namespace mappings.</p>
<p>Algorithm:
1. Convert the URIRef to a string if needed.
2. Iterate over NAMESPACE_MAP to find a prefix whose namespace is a prefix of the given URI.
3. If found, return prefix:LocalName. Otherwise, return the original URI string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>uri</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>URIRef</em><em>]</em>) – The URI to convert.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Prefixed form of the URI (e.g. ‘mds:SampleSize’).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.mds_ontology_analyzer.get_top_level_terms_from_combined">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.mds_ontology_analyzer.</span></span><span class="sig-name descname"><span class="pre">get_top_level_terms_from_combined</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">combined_ontology_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/mds_ontology_analyzer.html#get_top_level_terms_from_combined"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.mds_ontology_analyzer.get_top_level_terms_from_combined" title="Link to this definition"></a></dt>
<dd><p>Derives top-level categories directly from the combined ontology. This removes the need for a separate
top-level ontology file.</p>
<p>A top-level category is defined as a class that appears as a ‘broader’ concept (object of SKOS.broader)
but does not appear as a narrower concept for any other class within the MDS namespace.
If no such classes are found, we consider classes with no broader relations as top-level.</p>
<p>Algorithm:
1. Parse the combined ontology.
2. For all triples (narrower SKOS.broader broader), record narrower and broader classes.
3. Top-level categories are those that appear as broader but never as narrower.
4. If none found this way, fallback to classes that never appear as narrower at all.</p>
<p>Time Complexity:
O(N + E) where N is number of classes and E is number of SKOS.broader relationships.</p>
<p>Space Complexity:
O(N) for storing class sets and relationships.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>combined_ontology_path</strong> (<em>str</em>) – Path to the combined MDS ontology (.ttl file).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A set of URIs for top-level category classes.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Set[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.mds_ontology_analyzer.update_category_colors">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.mds_ontology_analyzer.</span></span><span class="sig-name descname"><span class="pre">update_category_colors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">categories</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/mds_ontology_analyzer.html#update_category_colors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.mds_ontology_analyzer.update_category_colors" title="Link to this definition"></a></dt>
<dd><p>Updates the global CATEGORY_COLORS dictionary with color assignments for each category.</p>
<p>The function ensures that each category (in prefixed form e.g. ‘mds:tool’) is assigned
a unique color from the LIGHT_COLORS palette, cycling through colors if needed.</p>
<p>High-level logic:
1. Clear existing color assignments
2. Convert full URIs to prefixed form (e.g. ‘<a class="reference external" href="http://">http://</a>…#tool’ -&gt; ‘mds:tool’)
3. Assign colors from palette to each prefixed category
4. Update ONTO_CORE_CATEGORIES with final set of categories</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>categories</strong> (<em>Set</em><em>[</em><em>str</em><em>]</em>) – Set of category URIs to assign colors to
(e.g. {’<a class="reference external" href="http://">http://</a>…#tool’, ‘<a class="reference external" href="http://">http://</a>…#recipe’})</p>
</dd>
</dl>
<dl class="simple">
<dt>Global Effects:</dt><dd><ul class="simple">
<li><p>Updates CATEGORY_COLORS with mappings like {‘mds:tool’: ‘FFE6E6’, ‘mds:recipe’: ‘E6FFE6’}</p></li>
<li><p>Updates ONTO_CORE_CATEGORIES with prefixed category names</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-FAIRLinked.QBWorkflow.namespace_parser">
<span id="fairlinked-qbworkflow-namespace-parser-module"></span><h2>FAIRLinked.QBWorkflow.namespace_parser module<a class="headerlink" href="#module-FAIRLinked.QBWorkflow.namespace_parser" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.namespace_parser.parse_excel_to_namespace_map">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.namespace_parser.</span></span><span class="sig-name descname"><span class="pre">parse_excel_to_namespace_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">excel_file_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/namespace_parser.html#parse_excel_to_namespace_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.namespace_parser.parse_excel_to_namespace_map" title="Link to this definition"></a></dt>
<dd><p>Parses the Excel file containing namespaces and base URIs.
Updates and returns the namespace map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>excel_file_path</strong> (<em>str</em>) – The path to the Excel file to parse.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Updated namespace map.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-FAIRLinked.QBWorkflow.namespace_template_generator">
<span id="fairlinked-qbworkflow-namespace-template-generator-module"></span><h2>FAIRLinked.QBWorkflow.namespace_template_generator module<a class="headerlink" href="#module-FAIRLinked.QBWorkflow.namespace_template_generator" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.namespace_template_generator.generate_namespace_excel">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.namespace_template_generator.</span></span><span class="sig-name descname"><span class="pre">generate_namespace_excel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">excel_file_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/namespace_template_generator.html#generate_namespace_excel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.namespace_template_generator.generate_namespace_excel" title="Link to this definition"></a></dt>
<dd><p>Generates an Excel file listing default namespaces and their corresponding base URIs.
The Excel file is styled with borders, colored headers, and centered text for better readability.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>excel_file_path</strong> (<em>str</em>) – The path where the generated Excel file will be saved.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The function saves an Excel file containing the namespace-URI mappings to the provided file path.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-FAIRLinked.QBWorkflow.rdf_data_cube_workflow">
<span id="fairlinked-qbworkflow-rdf-data-cube-workflow-module"></span><h2>FAIRLinked.QBWorkflow.rdf_data_cube_workflow module<a class="headerlink" href="#module-FAIRLinked.QBWorkflow.rdf_data_cube_workflow" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_data_cube_workflow.parse_existing_datacube_workflow">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_data_cube_workflow.</span></span><span class="sig-name descname"><span class="pre">parse_existing_datacube_workflow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_data_cube_workflow.html#parse_existing_datacube_workflow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_data_cube_workflow.parse_existing_datacube_workflow" title="Link to this definition"></a></dt>
<dd><p>If the user has an existing RDF data cube file or a directory of such files,
parse it/them into a tabular format and optionally save as CSV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file_path</strong> (<em>str</em>) – Either a path to a single .ttl/.jsonld file
or a directory containing multiple .ttl/.jsonld/.json-ld files.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_data_cube_workflow.rdf_data_cube_workflow_start">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_data_cube_workflow.</span></span><span class="sig-name descname"><span class="pre">rdf_data_cube_workflow_start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_data_cube_workflow.html#rdf_data_cube_workflow_start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_data_cube_workflow.rdf_data_cube_workflow_start" title="Link to this definition"></a></dt>
<dd><p>Welcome to FAIRLinked 🚀</p>
<p>The entry point for the FAIRLinked data processing workflow using RDF Data Cube.</p>
<p>Steps Overview:
1. Checks if an existing RDF data cube file/folder is present.</p>
<blockquote>
<div><ul class="simple">
<li><p>If yes, parse it back to tabular format (optionally saving CSV).</p></li>
</ul>
</div></blockquote>
<ol class="arabic" start="2">
<li><p>If no existing data cube, prompts whether the user is running an experiment or not.
- If experiment, generate namespace &amp; data templates (with optional ontology analysis).
- Otherwise, parse existing Excel files for namespaces &amp; data,</p>
<blockquote>
<div><p>then convert them to RDF in ‘entire’ or ‘row-by-row’ mode.</p>
</div></blockquote>
</li>
</ol>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_data_cube_workflow.run_experiment_workflow">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_data_cube_workflow.</span></span><span class="sig-name descname"><span class="pre">run_experiment_workflow</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_data_cube_workflow.html#run_experiment_workflow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_data_cube_workflow.run_experiment_workflow" title="Link to this definition"></a></dt>
<dd><p>Generates namespace and data templates with optional ontology analysis for FAIRLinked.QBWorkflow.</p>
<p>Steps:
1. Check if the user has local ontology files (lowest-level &amp; combined).
2. If found, run classification =&gt; map terms to categories.
3. Generate ‘namespace_template.xlsx’ and ‘data_template.xlsx’,</p>
<blockquote>
<div><p>optionally populating with mapped terms.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_data_cube_workflow.run_ingestion_workflow">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_data_cube_workflow.</span></span><span class="sig-name descname"><span class="pre">run_ingestion_workflow</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_data_cube_workflow.html#run_ingestion_workflow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_data_cube_workflow.run_ingestion_workflow" title="Link to this definition"></a></dt>
<dd><blockquote>
<div><p>Processes namespace and data Excel files to generate RDF outputs with FAIRLinked.QBWorkflow.</p>
</div></blockquote>
<p>Steps:
1. Gather user inputs (ORCID, namespace/data Excel, output folder).
2. Prompt for conversion mode (entire or row-by-row).
3. If entire mode =&gt; ask for dataset name; if row-by-row =&gt; skip it.
4. Parse the Excel templates =&gt; produce RDF using convert_dataset_to_rdf_with_mode.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_data_cube_workflow.run_standard_workflow">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_data_cube_workflow.</span></span><span class="sig-name descname"><span class="pre">run_standard_workflow</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_data_cube_workflow.html#run_standard_workflow"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_data_cube_workflow.run_standard_workflow" title="Link to this definition"></a></dt>
<dd><p>Processes namespace and data Excel files to generate RDF outputs with FAIRLinked.QBWorkflow.</p>
<p>Steps:
1. Gather user inputs (ORCID, namespace/data Excel, output folder).
2. Prompt for conversion mode (entire or row-by-row).
3. If entire mode =&gt; ask for dataset name; if row-by-row =&gt; skip it.
4. Parse the Excel templates =&gt; produce RDF using convert_dataset_to_rdf_with_mode.</p>
</dd></dl>

</section>
<section id="module-FAIRLinked.QBWorkflow.rdf_to_df">
<span id="fairlinked-qbworkflow-rdf-to-df-module"></span><h2>FAIRLinked.QBWorkflow.rdf_to_df module<a class="headerlink" href="#module-FAIRLinked.QBWorkflow.rdf_to_df" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_to_df.parse_rdf_to_df">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_to_df.</span></span><span class="sig-name descname"><span class="pre">parse_rdf_to_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable_metadata_json_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrow_output_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_to_df.html#parse_rdf_to_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_to_df.parse_rdf_to_df" title="Link to this definition"></a></dt>
<dd><dl>
<dt>Description:</dt><dd><p>Parses one or multiple RDF Data Cube file(s) (TTL or JSON-LD) into a single
Pandas DataFrame plus a consolidated variable_metadata dictionary. This function
supports both “row-by-row” style RDF (each row =&gt; separate qb:DataSet) and “entire”
style RDF (one qb:DataSet with many slices), as well as any mixture of them
(multiple DataSets across multiple files).</p>
<p>After parsing each file’s DataSets, it merges the partial DataFrames and merges
partial metadata:</p>
<blockquote>
<div><ul class="simple">
<li><p>Merges units from different Observations</p></li>
<li><p>Merges altLabels, categories, and measure/dimension flags</p></li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>Then sorts the resulting DataFrame and writes:</dt><dd><ol class="arabic simple">
<li><p>The final DataFrame =&gt; Parquet</p></li>
<li><p>The final variable_metadata =&gt; JSON</p></li>
</ol>
</dd>
</dl>
<p>Finally, prints summary stats and previews the first row.</p>
</dd>
<dt>Algorithm (High-Level):</dt><dd><ol class="arabic simple">
<li><p>Gather all valid RDF files (.ttl/.jsonld/.json-ld) from either a single file path
or a directory (recursively).</p></li>
<li><p>Initialize an empty list of partial DataFrames (all_dfs) and an empty dictionary
for final_variable_metadata.</p></li>
<li><dl class="simple">
<dt>For each RDF file:</dt><dd><ol class="loweralpha simple">
<li><p>Determine the rdflib parse format (‘turtle’ or ‘json-ld’).</p></li>
<li><p>Parse the Graph.</p></li>
<li><p>Pass the Graph to _parse_single_rdf_graph(…) which may produce:
(partial_df, partial_metadata).</p></li>
<li><p>Concatenate partial_df to the global list (if not empty).</p></li>
<li><p>Merge partial_metadata into final_variable_metadata, unifying
measure units, altLabels, categories, etc.</p></li>
</ol>
</dd>
</dl>
</li>
<li><p>Concatenate all partial DataFrames if any =&gt; final_df.</p></li>
<li><p>Sort final_df by “ExperimentId” if present.</p></li>
<li><p>Reorder columns by (Category, ColumnName), with “ExperimentId” forced to front if it exists.</p></li>
<li><p>Convert final_df =&gt; PyArrow Table =&gt; Parquet =&gt; arrow_output_path.</p></li>
<li><p>Dump final_variable_metadata =&gt; JSON =&gt; variable_metadata_json_path.</p></li>
<li><p>Print summary stats &amp; preview.</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path</strong> (<em>str</em>) – Path to either a single .ttl/.jsonld file or a folder containing multiple .ttl/.jsonld files.</p></li>
<li><p><strong>variable_metadata_json_path</strong> (<em>str</em>) – Destination to write the final variable_metadata as JSON.</p></li>
<li><p><strong>arrow_output_path</strong> (<em>str</em>) – Destination to write the final PyArrow Table (saved in Parquet format).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>pa.Table  =&gt; The final table of observations, after merging across all files.
dict      =&gt; The final merged variable_metadata mapping each column =&gt; metadata.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>(pa.Table, dict)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-FAIRLinked.QBWorkflow.rdf_transformer">
<span id="fairlinked-qbworkflow-rdf-transformer-module"></span><h2>FAIRLinked.QBWorkflow.rdf_transformer module<a class="headerlink" href="#module-FAIRLinked.QBWorkflow.rdf_transformer" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_transformer.add_component_to_dsd">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_transformer.</span></span><span class="sig-name descname"><span class="pre">add_component_to_dsd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dsd_graph</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dsd_uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">URIRef</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prop_uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">URIRef</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">URIRef</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prop_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">URIRef</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_transformer.html#add_component_to_dsd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_transformer.add_component_to_dsd" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Description:</dt><dd><p>Adds a dimension/measure/attribute property to the qb:DataStructureDefinition
by creating a blank node and linking it accordingly.</p>
</dd>
<dt>Algorithm:</dt><dd><ol class="arabic simple">
<li><p>Create a blank node =&gt; component.</p></li>
<li><p>dsd_uri – qb:component –&gt; component</p></li>
<li><p>component – (component_type) –&gt; prop_uri  (e.g. dimension =&gt; prop_uri)</p></li>
<li><p>prop_uri – rdf:type –&gt; prop_type</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dsd_graph</strong> (<em>Graph</em>) – The Graph that holds the DSD.</p></li>
<li><p><strong>dsd_uri</strong> (<em>URIRef</em>) – The DataStructureDefinition node.</p></li>
<li><p><strong>prop_uri</strong> (<em>URIRef</em>) – The property URI for this dimension/measure/attribute.</p></li>
<li><p><strong>component_type</strong> (<em>URIRef</em>) – e.g. qb:dimension, qb:measure, qb:attribute.</p></li>
<li><p><strong>prop_type</strong> (<em>URIRef</em>) – e.g. qb:DimensionProperty, qb:MeasureProperty, qb:AttributeProperty.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_transformer.compute_file_hash">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_transformer.</span></span><span class="sig-name descname"><span class="pre">compute_file_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_transformer.html#compute_file_hash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_transformer.compute_file_hash" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Description:</dt><dd><p>Computes the SHA-256 hash of a given file by reading its contents in chunks.</p>
</dd>
<dt>Algorithm:</dt><dd><ol class="arabic simple">
<li><p>Initialize a sha256 object (hashlib.sha256).</p></li>
<li><p>Open the file in ‘rb’ mode.</p></li>
<li><p>Read the file in 4096-byte chunks, updating the hash object each time.</p></li>
<li><p>Return the hex digest of the final hash.</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file_path</strong> (<em>str</em>) – The path to the file that needs hashing.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The SHA-256 hex digest string for the file contents.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_transformer.convert_dataset_to_rdf_with_mode">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_transformer.</span></span><span class="sig-name descname"><span class="pre">convert_dataset_to_rdf_with_mode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">namespace_map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_chosen_prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'mds'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orcid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'SampleDataset'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed_dimensions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conversion_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'entire'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_transformer.html#convert_dataset_to_rdf_with_mode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_transformer.convert_dataset_to_rdf_with_mode" title="Link to this definition"></a></dt>
<dd><dl>
<dt>Description:</dt><dd><dl class="simple">
<dt>Main entry point for converting a Pandas DataFrame to RDF using either:</dt><dd><ul class="simple">
<li><p>‘entire’: single qb:DataSet with multiple qb:Slices</p></li>
<li><p>‘row-by-row’: each row =&gt; a separate qb:DataSet</p></li>
</ul>
</dd>
</dl>
<p>Also writes a naming conventions .txt file describing how URIs and filenames are formed.</p>
</dd>
<dt>Algorithm:</dt><dd><ol class="arabic simple">
<li><p>create_root_folder =&gt; get a top-level folder named “Output_{orcidDigits}_{timestamp}”.</p></li>
<li><p>prepare_namespaces =&gt; validate prefix =&gt; namespace URIs.</p></li>
<li><dl class="simple">
<dt>If conversion_mode == ‘entire’:</dt><dd><ol class="loweralpha simple">
<li><p>create_subfolders =&gt; ‘ttl’, ‘jsonld’, ‘hash’</p></li>
<li><p>build combined_iri =&gt; dataset_name_for_iri</p></li>
<li><p>call convert_entire_dataset(…)</p></li>
</ol>
</dd>
<dt>elif conversion_mode == ‘row-by-row’:</dt><dd><p>call convert_row_by_row(…)</p>
</dd>
<dt>else:</dt><dd><p>raise ValueError if mode is invalid</p>
</dd>
</dl>
</li>
<li><p>write_naming_conventions_doc =&gt; describing the chosen naming approach</p></li>
<li><p>Print success message.</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – The data to convert.</p></li>
<li><p><strong>variable_metadata</strong> (<em>dict</em>) – column =&gt; metadata (like IsMeasure, Unit, Category, etc.).</p></li>
<li><p><strong>namespace_map</strong> (<em>dict</em>) – prefix =&gt; base URI for RDF</p></li>
<li><p><strong>user_chosen_prefix</strong> (<em>str</em>) – e.g. ‘mds’</p></li>
<li><p><strong>output_folder_path</strong> (<em>str</em>) – base folder path for new output folder</p></li>
<li><p><strong>orcid</strong> (<em>str</em>) – user’s ORCID</p></li>
<li><p><strong>dataset_name</strong> (<em>str</em>) – used if ‘entire’ mode</p></li>
<li><p><strong>fixed_dimensions</strong> (<em>list</em><em> or </em><em>None</em>) – used in entire mode to specify columns that
remain the same across slices</p></li>
<li><p><strong>conversion_mode</strong> (<em>str</em>) – ‘entire’ or ‘row-by-row’</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_transformer.convert_entire_dataset">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_transformer.</span></span><span class="sig-name descname"><span class="pre">convert_entire_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns_map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_chosen_prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orcid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder_paths</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fixed_dimensions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overall_timestamp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_transformer.html#convert_entire_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_transformer.convert_entire_dataset" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Description:</dt><dd><p>Converts the entire DataFrame into a single qb:DataSet, and each row becomes
a qb:Slice. Observations are created for each measure in each row.
If user picks ID columns =&gt; these become part of the slice’s name.</p>
</dd>
<dt>Algorithm:</dt><dd><ol class="arabic simple">
<li><p>Identify columns with ‘id’. Prompt user with mode=’entire’ =&gt; get_approved_id_columns(…).</p></li>
<li><p>Create a DataStructureDefinition for the entire DF =&gt; dimensions + measures.</p></li>
<li><p>Add a single qb:DataSet =&gt; e.g. mds:Dataset_{datasetName}.</p></li>
<li><p>Create a single qb:SliceKey referencing dimension properties.</p></li>
<li><p>For each row =&gt; create qb:Slice =&gt; name derived from (someIDs + orcid + timestamp).</p></li>
<li><p>Within that slice =&gt; create Observations (one per measure).</p></li>
<li><p>Write a single .ttl/.jsonld + .sha256 hash to the respective subfolders.</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – The entire dataset in tabular form.</p></li>
<li><p><strong>variable_metadata</strong> (<em>dict</em>) – column =&gt; metadata dictionary.</p></li>
<li><p><strong>ns_map</strong> (<em>dict</em>) – prefix =&gt; rdflib.Namespace</p></li>
<li><p><strong>user_chosen_prefix</strong> (<em>str</em>) – e.g. ‘mds’</p></li>
<li><p><strong>dataset_name</strong> (<em>str</em>) – e.g. ‘SampleDataset’ (already sanitized or not).</p></li>
<li><p><strong>orcid</strong> (<em>str</em>) – The user’s ORCID from which we parse digits for naming.</p></li>
<li><p><strong>output_folder_paths</strong> (<em>dict</em>) – subfolders =&gt; their paths.</p></li>
<li><p><strong>fixed_dimensions</strong> (<em>list</em><em> or </em><em>None</em>) – optionally specify columns that remain fixed in every slice.</p></li>
<li><p><strong>overall_timestamp</strong> (<em>str</em><em> or </em><em>None</em>) – If provided, used for consistent naming across slices.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_transformer.convert_row_by_row">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_transformer.</span></span><span class="sig-name descname"><span class="pre">convert_row_by_row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns_map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_chosen_prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orcid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_folder_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overall_timestamp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_transformer.html#convert_row_by_row"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_transformer.convert_row_by_row" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Description:</dt><dd><p>Converts each row of a DataFrame into its own qb:DataSet in RDF, prompting the user
to choose which ID columns to incorporate in naming. Each row-based dataset shares
the same folder timestamp to keep them grouped.</p>
</dd>
<dt>Algorithm:</dt><dd><ol class="arabic simple">
<li><p>Identify candidate ID columns (contain ‘id’), pass ‘row-by-row’ to get_approved_id_columns(…).</p></li>
<li><p>Extract which columns are dimensions vs. measures =&gt; create a single DSD for entire DF.</p></li>
<li><dl class="simple">
<dt>For each row =&gt; build a new Graph that:</dt><dd><ul class="simple">
<li><p>Copies the DSD</p></li>
<li><p>Creates a new qb:DataSet =&gt; mds:Dataset_{someIDs}_{orcid}_{timestamp}</p></li>
<li><p>Creates a SliceKey =&gt; mds:SliceKey_{someIDs}_{orcid}_{timestamp}</p></li>
<li><p>Creates a Slice =&gt; mds:Slice_{someIDs}_{orcid}_{timestamp}</p></li>
<li><p>Adds Observations for each measure</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Write each row’s TTL/JSON-LD + .sha256 hash in subfolders.</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – The entire DataFrame to convert row-by-row.</p></li>
<li><p><strong>variable_metadata</strong> (<em>dict</em>) – column =&gt; metadata dictionary.</p></li>
<li><p><strong>ns_map</strong> (<em>dict</em>) – prefix =&gt; Namespace mapping.</p></li>
<li><p><strong>user_chosen_prefix</strong> (<em>str</em>) – e.g. ‘mds’.</p></li>
<li><p><strong>orcid</strong> (<em>str</em>) – The user’s ORCID, from which we extract digits.</p></li>
<li><p><strong>root_folder_path</strong> (<em>str</em>) – The top-level folder for outputs.</p></li>
<li><p><strong>overall_timestamp</strong> (<em>str</em>) – The run’s global timestamp for consistent naming.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_transformer.convert_row_by_row_CRADLE">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_transformer.</span></span><span class="sig-name descname"><span class="pre">convert_row_by_row_CRADLE</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns_map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_chosen_prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orcid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_folder_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overall_timestamp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_transformer.html#convert_row_by_row_CRADLE"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_transformer.convert_row_by_row_CRADLE" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Description:</dt><dd><p>Converts each row of a DataFrame into its own qb:DataSet in RDF, prompting the user
to choose which ID columns to incorporate in naming. Each row-based dataset shares
the same folder timestamp to keep them grouped.</p>
</dd>
<dt>Algorithm:</dt><dd><ol class="arabic simple">
<li><p>Identify candidate ID columns (contain ‘id’), pass ‘row-by-row’ to get_approved_id_columns(…).</p></li>
<li><p>Extract which columns are dimensions vs. measures =&gt; create a single DSD for entire DF.</p></li>
<li><dl class="simple">
<dt>For each row =&gt; build a new Graph that:</dt><dd><ul class="simple">
<li><p>Copies the DSD</p></li>
<li><p>Creates a new qb:DataSet =&gt; mds:Dataset_{someIDs}_{orcid}_{timestamp}</p></li>
<li><p>Creates a SliceKey =&gt; mds:SliceKey_{someIDs}_{orcid}_{timestamp}</p></li>
<li><p>Creates a Slice =&gt; mds:Slice_{someIDs}_{orcid}_{timestamp}</p></li>
<li><p>Adds Observations for each measure</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Write each row’s TTL/JSON-LD + .sha256 hash in subfolders.</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – The entire DataFrame to convert row-by-row.</p></li>
<li><p><strong>variable_metadata</strong> (<em>dict</em>) – column =&gt; metadata dictionary.</p></li>
<li><p><strong>ns_map</strong> (<em>dict</em>) – prefix =&gt; Namespace mapping.</p></li>
<li><p><strong>user_chosen_prefix</strong> (<em>str</em>) – e.g. ‘mds’.</p></li>
<li><p><strong>orcid</strong> (<em>str</em>) – The user’s ORCID, from which we extract digits.</p></li>
<li><p><strong>root_folder_path</strong> (<em>str</em>) – The top-level folder for outputs.</p></li>
<li><p><strong>overall_timestamp</strong> (<em>str</em>) – The run’s global timestamp for consistent naming.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_transformer.create_dsd">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_transformer.</span></span><span class="sig-name descname"><span class="pre">create_dsd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variable_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dimensions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">measures</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns_map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_ns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Namespace</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_transformer.html#create_dsd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_transformer.create_dsd" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Description:</dt><dd><p>Builds a qb:DataStructureDefinition for the given dimensions and measures.
Also sets up measureType as a dimension. Adds optional qb:attribute for ‘unitMeasure’
and ‘category’ if present.</p>
</dd>
<dt>Algorithm:</dt><dd><ol class="arabic simple">
<li><p>Initialize an empty Graph, bind namespace prefixes.</p></li>
<li><p>Create dsd_uri = user_ns[“DataStructureDefinition”], mark it as qb:DataStructureDefinition.</p></li>
<li><p>For each dimension =&gt; add_component_to_dsd(…).</p></li>
<li><p>Add measureType as dimension.</p></li>
<li><p>For each measure =&gt; add_component_to_dsd(…).</p></li>
<li><p>If any columns require ‘unitMeasure’ or ‘category’, add qb:attribute.</p></li>
<li><p>Return (dsd_graph, dsd_uri).</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable_metadata</strong> (<em>dict</em>) – Maps column =&gt; metadata (like AltLabel, Category, etc.).</p></li>
<li><p><strong>dimensions</strong> (<em>list</em>) – The dimension column names.</p></li>
<li><p><strong>measures</strong> (<em>list</em>) – The measure column names.</p></li>
<li><p><strong>ns_map</strong> (<em>dict</em>) – prefix =&gt; Namespace</p></li>
<li><p><strong>user_ns</strong> (<em>Namespace</em>) – The user-chosen prefix’s Namespace.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dsd_graph: The Graph containing the DSD definitions.
dsd_uri: The URIRef for the qb:DataStructureDefinition.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>(Graph, URIRef)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_transformer.create_observation">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_transformer.</span></span><span class="sig-name descname"><span class="pre">create_observation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_graph</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Graph</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable_dimensions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">measures</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns_map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_ns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Namespace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observation_counter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_transformer.html#create_observation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_transformer.create_observation" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Description:</dt><dd><p>For each measure in ‘measures’, if the row has a non-null value, create a qb:Observation
node. Link measureType =&gt; measure property, store measure value, dimension values (from
variable_dimensions), and optionally link the unit measure if found.</p>
</dd>
<dt>Algorithm:</dt><dd><ol class="arabic simple">
<li><p>For each measure in ‘measures’:
a) If row[measure] is not null =&gt; create observation_{observation_counter} as qb:Observation.
b) Add triple (obs_uri, qb:measureType, measure_prop).
c) Add triple (obs_uri, measure_prop, measure_value).
d) For each dimension in variable_dimensions =&gt; store dimension_value or NotFound.
e) If UNIT_FIELD =&gt; link sdmx-attribute:unitMeasure =&gt; unit URI.</p></li>
<li><p>Return (list_of_observation_uris, updated_observation_counter).</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset_graph</strong> (<em>Graph</em>) – The graph where we store Observations and data.</p></li>
<li><p><strong>row</strong> (<em>pd.Series</em>) – A single row from the DataFrame.</p></li>
<li><p><strong>variable_metadata</strong> (<em>dict</em>) – column =&gt; metadata.</p></li>
<li><p><strong>variable_dimensions</strong> (<em>list</em>) – the subset of dimensions that vary in this context.</p></li>
<li><p><strong>measures</strong> (<em>list</em>) – measure column names.</p></li>
<li><p><strong>ns_map</strong> (<em>dict</em>) – prefix =&gt; Namespace.</p></li>
<li><p><strong>user_ns</strong> (<em>Namespace</em>) – the user-chosen prefix’s Namespace object.</p></li>
<li><p><strong>observation_counter</strong> (<em>int</em>) – the current global counter for numbering Observations.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of the newly created observation URIs, plus the incremented observation_counter.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>(list_of_obs_uris, updated_counter)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_transformer.create_observation_2">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_transformer.</span></span><span class="sig-name descname"><span class="pre">create_observation_2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns_map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_ns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Namespace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Graph</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_transformer.html#create_observation_2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_transformer.create_observation_2" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_transformer.create_root_folder">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_transformer.</span></span><span class="sig-name descname"><span class="pre">create_root_folder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_folder_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orcid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_transformer.html#create_root_folder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_transformer.create_root_folder" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Description:</dt><dd><p>Creates a top-level folder named ‘Output_{orcidDigits}_{timestamp}’ to store all
outputs for the conversion process. Also prepares standardized strings for dataset
and orcid usage throughout the process.</p>
</dd>
<dt>Algorithm:</dt><dd><ol class="arabic simple">
<li><p>Generate a timestamp in ‘YYYYmmddHHMMSS’ format.</p></li>
<li><p>Extract digits from the user’s ORCID =&gt; ‘sanitized_orcid’.</p></li>
<li><p>Sanitize ‘dataset_name’ =&gt; ‘sanitized_dataset_name’ by replacing non-word chars.</p></li>
<li><p>Construct folder name =&gt; “Output_{sanitized_orcid}_{timestamp}”.</p></li>
<li><p>os.makedirs(…) to create the folder if not existing.</p></li>
<li><p>Return (root_folder_path, overall_timestamp, sanitized_dataset_name, sanitized_orcid).</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_folder_path</strong> (<em>str</em>) – The parent path where we create this top-level output folder.</p></li>
<li><p><strong>dataset_name</strong> (<em>str</em>) – The dataset name to be sanitized (though not used in folder name).</p></li>
<li><p><strong>orcid</strong> (<em>str</em>) – The user’s ORCID, from which we extract digits.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>(</dt><dd><p>root_folder_path (str): The newly created folder path,
overall_timestamp (str): The run-specific timestamp (YYYYmmddHHMMSS),
sanitized_dataset_name (str): The sanitized dataset name,
sanitized_orcid (str): The numeric portion extracted from the ORCID.</p>
</dd>
</dl>
<p>)</p>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_transformer.create_subfolders">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_transformer.</span></span><span class="sig-name descname"><span class="pre">create_subfolders</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root_folder_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_transformer.html#create_subfolders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_transformer.create_subfolders" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Description:</dt><dd><p>Creates three subfolders (‘ttl’, ‘jsonld’, ‘hash’) under the specified root folder
to store Turtle files (.ttl), JSON-LD files (.jsonld), and the SHA-256 hash files (.sha256).</p>
</dd>
<dt>Algorithm:</dt><dd><ol class="arabic simple">
<li><p>Define a list of subfolder names: [‘ttl’, ‘jsonld’, ‘hash’].</p></li>
<li><p>For each subfolder name:
- Construct a path using os.path.join(root_folder_path, folder_name).
- Create the directory if it doesn’t exist (os.makedirs with exist_ok=True).
- Store the result in a dictionary under the same key.</p></li>
<li><p>Return this dictionary of paths.</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>root_folder_path</strong> (<em>str</em>) – The path to the parent output folder where subfolders will be created.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary of subfolder paths, keyed by ‘ttl’, ‘jsonld’, and ‘hash’.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_transformer.extract_variables">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_transformer.</span></span><span class="sig-name descname"><span class="pre">extract_variables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variable_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_transformer.html#extract_variables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_transformer.extract_variables" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Description:</dt><dd><p>Splits columns into ‘dimensions’ or ‘measures’ by checking variable_metadata[var_name][‘IsMeasure’].</p>
</dd>
<dt>Algorithm:</dt><dd><ol class="arabic simple">
<li><p>Initialize dimensions = [] and measures = [].</p></li>
<li><p>For each column in df_columns:
- Retrieve meta = variable_metadata.get(column).
- If meta is found, check ‘IsMeasure’ =&gt; ‘yes’? =&gt; measures, else =&gt; dimensions.
- If not found, log a warning message.</p></li>
<li><p>Return (dimensions, measures).</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable_metadata</strong> (<em>dict</em>) – A dict mapping column =&gt; metadata (with ‘IsMeasure’, etc.).</p></li>
<li><p><strong>df_columns</strong> (<em>list</em>) – The list of column names from the DataFrame.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple of (dimensions, measures).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>(list, list)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_transformer.get_property_uri">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_transformer.</span></span><span class="sig-name descname"><span class="pre">get_property_uri</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">var_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns_map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_ns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Namespace</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">URIRef</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_transformer.html#get_property_uri"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_transformer.get_property_uri" title="Link to this definition"></a></dt>
<dd><dl>
<dt>Description:</dt><dd><p>Obtains the appropriate URIRef for a given variable. If ‘ExistingURI’ is provided,
attempts to parse it as ‘prefix:LocalPart’ or a full URI. Otherwise, uses the user
namespace + sanitized var_name.</p>
</dd>
<dt>Algorithm:</dt><dd><ol class="arabic">
<li><p>If meta has ‘ExistingURI’:
a) if it has ‘:’ =&gt; split prefix vs. local_part</p>
<blockquote>
<div><p>=&gt; look up in ns_map =&gt; create ns[local_part]</p>
</div></blockquote>
<ol class="loweralpha simple" start="2">
<li><p>else treat it as a full URIRef</p></li>
</ol>
</li>
<li><p>Otherwise =&gt; user_ns[var_name], with spaces replaced by underscores.</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>var_name</strong> (<em>str</em>) – The DataFrame column name.</p></li>
<li><p><strong>meta</strong> (<em>dict</em>) – The metadata for that variable (keys e.g. ‘ExistingURI’).</p></li>
<li><p><strong>ns_map</strong> (<em>dict</em>) – A dictionary mapping prefix =&gt; rdflib.Namespace.</p></li>
<li><p><strong>user_ns</strong> (<em>Namespace</em>) – The user-chosen prefix’s Namespace object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The final property URI for this variable.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>rdflib.term.URIRef</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError if prefix not found in ns_map.</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_transformer.prepare_namespaces">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_transformer.</span></span><span class="sig-name descname"><span class="pre">prepare_namespaces</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">namespace_map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_chosen_prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'mds'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_transformer.html#prepare_namespaces"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_transformer.prepare_namespaces" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Description:</dt><dd><p>Validates the user-defined prefix in namespace_map, ensures each URI ends with
‘/’ or ‘#’, and converts them to rdflib.Namespace objects.</p>
</dd>
<dt>Algorithm:</dt><dd><ol class="arabic simple">
<li><p>Copy the input namespace_map.</p></li>
<li><p>Check if user_chosen_prefix in the map; raise an error if missing.</p></li>
<li><p>For each (prefix, uri):
- Validate it starts with http(s).
- Ensure it ends with ‘/’ or ‘#’.</p></li>
<li><p>Convert each to Namespace(…).</p></li>
<li><p>Return the new dictionary.</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>namespace_map</strong> (<em>dict</em>) – Keys =&gt; prefix (str), Values =&gt; base URI (str).</p></li>
<li><p><strong>user_chosen_prefix</strong> (<em>str</em>) – The prefix the user wants to use for new IRIs (default: ‘mds’).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A mapping of prefix =&gt; rdflib.Namespace objects.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError if user_chosen_prefix is missing</strong><strong> or </strong><strong>if any URI is invalid.</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_transformer.process_unit">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_transformer.</span></span><span class="sig-name descname"><span class="pre">process_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unit_str</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ns_map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_ns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Namespace</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">URIRef</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_transformer.html#process_unit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_transformer.process_unit" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Description:</dt><dd><p>Interprets a ‘Unit’ string from variable_metadata and returns an rdflib.URIRef
for that unit. If it’s ‘prefix:LocalPart’, we look up prefix in ns_map. Otherwise,
we treat it as user_ns[unitStr] (with spaces replaced).</p>
</dd>
<dt>Algorithm:</dt><dd><ol class="arabic simple">
<li><p>If unit_str is empty =&gt; return None.</p></li>
<li><p>If ‘:’ in unit_str =&gt; parse prefix, local_part =&gt; ns_map[prefix][local_part].</p></li>
<li><p>Otherwise =&gt; user_ns[unit_str], replacing spaces with underscores.</p></li>
<li><p>If prefix not found =&gt; raise ValueError.</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>unit_str</strong> (<em>str</em>) – e.g. “qudt:MilliM” or “MyLocalUnit”.</p></li>
<li><p><strong>ns_map</strong> (<em>dict</em>) – prefix =&gt; Namespace</p></li>
<li><p><strong>user_ns</strong> (<em>Namespace</em>) – the user prefix’s namespace.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>rdflib.URIRef or None if no unit_str given.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError if prefix is missing from ns_map.</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.rdf_transformer.write_naming_conventions_doc">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.rdf_transformer.</span></span><span class="sig-name descname"><span class="pre">write_naming_conventions_doc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root_folder_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conversion_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orcid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overall_timestamp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/rdf_transformer.html#write_naming_conventions_doc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.rdf_transformer.write_naming_conventions_doc" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Description:</dt><dd><p>Writes a text file (naming_conventions_{orcidDigits}_{timestamp}.txt) describing
how the DataSet, Slice, SliceKey, and filenames are named in the chosen mode
(‘entire’ or ‘row-by-row’).</p>
</dd>
<dt>Algorithm:</dt><dd><ol class="arabic simple">
<li><p>Extract numeric digits from ‘orcid’ =&gt; numeric_orcid.</p></li>
<li><p>Build the .txt filename =&gt; naming_conventions_{numeric_orcid}_{overall_timestamp}.txt.</p></li>
<li><p>Depending on ‘conversion_mode’, build a descriptive message about naming patterns.</p></li>
<li><p>Write this message to the .txt file in ‘root_folder_path’.</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>root_folder_path</strong> (<em>str</em>) – The folder where we store the .txt file.</p></li>
<li><p><strong>conversion_mode</strong> (<em>str</em>) – ‘entire’ or ‘row-by-row’ mode.</p></li>
<li><p><strong>orcid</strong> (<em>str</em>) – The user’s ORCID (for numeric extraction).</p></li>
<li><p><strong>overall_timestamp</strong> (<em>str</em>) – The run-specific timestamp used for naming outputs.</p></li>
<li><p><strong>dataset_name</strong> (<em>str</em>) – The sanitized dataset name to reference in the doc.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-FAIRLinked.QBWorkflow.utility">
<span id="fairlinked-qbworkflow-utility-module"></span><h2>FAIRLinked.QBWorkflow.utility module<a class="headerlink" href="#module-FAIRLinked.QBWorkflow.utility" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="FAIRLinked.QBWorkflow.utility.validate_orcid_format">
<span class="sig-prename descclassname"><span class="pre">FAIRLinked.QBWorkflow.utility.</span></span><span class="sig-name descname"><span class="pre">validate_orcid_format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orcid</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/FAIRLinked/QBWorkflow/utility.html#validate_orcid_format"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#FAIRLinked.QBWorkflow.utility.validate_orcid_format" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-FAIRLinked.QBWorkflow">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-FAIRLinked.QBWorkflow" title="Link to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="FAIRLinked.InterfaceMDS.html" class="btn btn-neutral float-left" title="FAIRLinked.InterfaceMDS package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="FAIRLinked.RDFTableConversion.html" class="btn btn-neutral float-right" title="FAIRLinked.RDFTableConversion package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Van D. Tran, Ritika Lamba, Balashanmuga Priyan Rajamohan, Gabriel Ponon, Kai Zheng, Benjamin Pierce, Quynh D. Tran, Ozan Dernek, Erika I. Barcelos, Roger H. French.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>